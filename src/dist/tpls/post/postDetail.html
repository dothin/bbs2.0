<div class="container detail-wrap"><div class="row detail"><div class="col-md-2 col-sm-3 hidden-xs"><img ng-src={{vm.postDetail.user_face}} class="img-responsive br5"><p class="text-center pt10">{{vm.postDetail.user_name}}--{{vm.postDetail.user_level_name}}</p><p class=text-center><span>积分：{{vm.postDetail.user_integral}}</span></p><p class=text-center><a ng-click=addMessageModalShow(vm.postDetail.user_id,vm.postDetail.user_name) class=mr10>留言</a> <a ng-if=vm.postDetail.isNotMyFriend ng-click=addFriendModalShow(vm.postDetail.user_id,vm.postDetail.user_name)>加好友</a> <a ng-if=vm.postDetail.isMyFriend ng-click=addWhispersModalShow(vm.postDetail.user_id,vm.postDetail.user_name)>发私信</a></p></div><div class="col-md-10 col-sm-9 col-xs-12 detail-main"><div class=detail-top><span class=pull-right>{{vm.postDetail.post_Jin}}</span> <span class="pull-right mr10">{{vm.postDetail.post_Re}}</span><h4 class=fb>{{vm.postDetail.post_title}}</h4><span class=pull-right ng-if=vm.isUserModule><a ng-if=vm.isNotJin ng-click=setJin(vm.postDetail.module_id)>设置精华帖</a>&nbsp; <a ng-if=vm.isJin ng-click=removeJin(vm.postDetail.module_id)>取消精华帖</a>&nbsp; <a ng-if=vm.isNotRe ng-click=setRe(vm.postDetail.module_id)>设置热帖</a>&nbsp; <a ng-if=vm.isRe ng-click=removeRe(vm.postDetail.module_id)>取消热帖</a></span> <span ng-if=vm.isMe><a ng-click=deletePost()>删除</a> <a ng-click=updatePostModal(vm.postDetail.post_id,vm.postDetail.post_title,vm.postDetail.module_id,vm.postDetail.post_type,vm.postDetail.post_content)>修改</a></span><p class=pt20><span class=mr10>{{vm.postDetail.module_name}}</span> <span class=visible-xs-inline>{{vm.postDetail.user_name}}<span class="small text-muted">发表于</span></span> <span class="mr10 small text-muted">{{vm.postDetail.post_time}}</span><br class=visible-xs><span class=mr10><span class="glyphicon glyphicon-eye-open"></span>&nbsp;{{vm.postDetail.post_readcount}}</span> <span class=mr10><span class="glyphicon glyphicon-comment"></span>&nbsp;{{vm.postDetail.post_commentcount}}</span> <a ng-click=addSupport() class=mr10 title=支持><span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;{{vm.postDetail.post_support}}</a> <a ng-click=addAgainst() class=mr10 title=反对><span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;{{vm.postDetail.post_against}}</a> <span class=visible-xs-inline><a ng-click=addMessageModalShow(vm.postDetail.user_id,vm.postDetail.user_name) class=mr10>留言</a> <a ng-if=vm.postDetail.isNotMyFriend ng-click=addFriendModalShow(vm.postDetail.user_id,vm.postDetail.user_name)>加好友</a> <a ng-if=vm.postDetail.isMyFriend ng-click=addWhispersModalShow(vm.postDetail.user_id,vm.postDetail.user_name)>发私信</a></span></p></div><div class="detail-content pb20" ng-bind-html="vm.postDetail.post_content | to_trusted"></div><div class=detail-bottom><p class=pt20><span class=mr10><span class="glyphicon glyphicon-eye-open"></span>&nbsp;{{vm.postDetail.post_readcount}}</span> <span class=mr10><span class="glyphicon glyphicon-comment"></span>&nbsp;{{vm.postDetail.post_commentcount}}</span> <a ng-click=addSupport() class=mr10 title=支持><span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;{{vm.postDetail.post_support}}</a> <a ng-click=addAgainst() class=mr10 title=反对><span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;{{vm.postDetail.post_against}}</a> <span ng-if="vm.postDetail.user_sign_active==1" class=hidden-xs>签名:{{vm.postDetail.user_signatrue}}</span> <a ng-click=addCollection() class=pull-right title=收藏>收藏&nbsp;<span class="glyphicon glyphicon-star-empty"></span>&nbsp;{{vm.postDetail.post_collection_num}}</a></p></div></div></div><div ng-switch=vm.tableFlag><div class="row detail is-loading" ng-switch-when=0>加载中……</div><div class=table-box ng-switch-when=1><div class="row detail" ng-repeat="repost in vm.repostList"><div class="col-md-2 col-sm-3 hidden-xs"><img ng-src={{repost.user_face}} class="img-responsive br5"><p class="text-center pt10">{{repost.user_name}}--{{repost.user_level_name}}</p><p class=text-center><span>积分：{{repost.user_integral}}</span></p><p class=text-center><a ng-click=addMessageModalShow(repost.user_id,repost.user_name) class=mr10>留言</a><a ng-if=repost.isNotMyFriend ng-click=addFriendModalShow(repost.user_id,repost.user_name)>加好友</a><a ng-if=repost.isMyFriend ng-click=addWhispersModalShow(repost.user_id,repost.user_name)>发私信</a></p></div><div class="col-md-10 col-sm-9 col-xs-12 detail-main relative"><p class=min-h130>{{repost.repost_content}}</p><p class="text-right repost_bottom min-h40 lh40 mb0 pr10"><span ng-if="repost.user_sign_active==1" class="hidden-xs mr10">签名:{{repost.user_signatrue}}</span> <span class=visible-xs-inline>{{repost.user_name}}<span class="small text-muted">发表于</span></span> <span class="mr10 small text-muted">{{repost.repost_time}}</span><br class=visible-xs><a ng-click=addRepostSupport(repost.repost_id,$event) class=mr10 title=支持><span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;<span class=num1>{{repost.repost_support}}</span></a> <a ng-click=addRepostAgainst(repost.repost_id,$event) class=mr10 title=反对><span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;<span class=num2>{{repost.repost_against}}</span></a> <span class="visible-xs-inline mr10"><a ng-click=addMessageModalShow(repost.user_id,repost.user_name) class=mr10>留言</a><a ng-if=repost.isNotMyFriend ng-click=addFriendModalShow(repost.user_id,repost.user_name)>加好友</a><a ng-if=repost.isMyFriend ng-click=addWhispersModalShow(repost.user_id,repost.user_name)>发私信</a></span> <a title=回复 data-flag=true ng-click=getRerepostForm($event,repost.repost_id)>回复</a></p><div class=rerepostList-box><div class=rerepostList ng-if=repost.rerepostListShow><div ng-repeat="rerepost in repost.rerepostList"><img ng-src={{rerepost.user_face}} alt={{rerepost.user_name}} class="img-responsive br5 mt5 h50 pull-left"><p class="break_all ml55 min-h40">{{rerepost.rerepost_content}}</p><p class="text-muted text-right"><span class="small text-muted">{{rerepost.rerepost_time}}</span></p></div></div></div></div></div></div><tm-pagination conf=paginationConf></tm-pagination><div ng-switch-when=2 class="row detail text-center text-muted">暂无评论</div></div><div class="row detail pb0"><form class=form-horizontal><div class=form-group><div class="col-sm-10 col-sm-offset-1"><textarea class=form-control ng-model=vm.addPostComment.repost_content placeholder=发表评论></textarea></div></div><div class=form-group><div class="col-sm-10 col-sm-offset-1"><button type=submit class="btn btn-primary" ng-click=addPostComment()>发表</button></div></div></form></div><div class="rerepostform none" id=rerepostForm><form class=form-horizontal><div class=form-group><div class=col-sm-12><textarea class=form-control ng-model=vm.addRepostComment.rerepost_content placeholder=发表评论></textarea></div></div><div class=form-group><div class=col-sm-12><button type=submit class="btn btn-primary pull-right" ng-click=addRepostComment()>回复</button></div></div></form></div></div><div class="modal fade" id=addFriend tabindex=-1 role=dialog aria-labelledby=myModalLabelfriend><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title id=myModalLabelfriend>添加好友</h4></div><div class=modal-body><form class=form-horizontal><p class="bg-warning pt10 pb10 pl15 pr15">您正在添加 <strong>{{vm.addFriend.name}}</strong> 为好友，清输入验证信息，方便他(她)同意</p><div class=form-group><label for=inputPassword3 class="col-sm-2 control-label">验证信息</label><div class=col-sm-8><textarea class=form-control ng-model=vm.addFriend.desc placeholder=跟我交朋友吧></textarea></div></div></form></div><div class=modal-footer><button type=button ng-click=addFriend() class="btn btn-primary">确定</button></div></div></div></div><div class="modal fade" id=addMessage tabindex=-1 role=dialog aria-labelledby=myModalLabelfriend><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title id=myModalLabelfriend>发留言</h4></div><div class=modal-body><form class=form-horizontal><p class="bg-warning pt10 pb10 pl15 pr15">您正在给 <strong>{{vm.addMessage.name}}</strong> 发起留言</p><div class=form-group><label for=inputPassword3 class="col-sm-2 control-label">留言信息</label><div class=col-sm-8><textarea class=form-control ng-model=vm.addMessage.content placeholder=留言></textarea></div></div></form></div><div class=modal-footer><button type=button ng-click=addMessage() class="btn btn-primary">确定</button></div></div></div></div><div class="modal fade" id=addWhispers tabindex=-1 role=dialog aria-labelledby=myModalLabelfriend><div class=modal-dialog role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title id=myModalLabelfriend>发私信</h4></div><div class=modal-body><form class=form-horizontal><p class="bg-warning pt10 pb10 pl15 pr15">您正在给 <strong>{{vm.addWhispers.name}}</strong> 发起私信</p><div class=form-group><label for=inputPassword3 class="col-sm-2 control-label">私信信息</label><div class=col-sm-8><textarea class=form-control ng-model=vm.addWhispers.content placeholder=私信></textarea></div></div></form></div><div class=modal-footer><button type=button ng-click=addWhispers() class="btn btn-primary">确定</button></div></div></div></div><div class="modal fade" id=updateModal tabindex=-1 role=dialog aria-labelledby=myModalLabelupdate><div class="modal-dialog modal-lg" role=document><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button><h4 class=modal-title id=myModalLabelupdate>修改帖子</h4></div><div class=modal-body><form class="form-horizontal pt20"><div class=form-group><label for=inputEmail3 class="col-sm-1 control-label">标题</label><div class=col-sm-10><input type=text class=form-control ng-model=vm.postData.title placeholder=标题></div></div><div class=form-group><label for=inputPassword2 class="col-sm-1 control-label">板块</label><div class=col-sm-10><label class="radio-inline min-w100" ng-repeat="module in vm.moduleList"><input type=radio name=module ng-checked=module.module_active ng-model=vm.postData.module_id value={{module.module_id}}> {{module.module_name}}</label></div></div><div class=form-group><label for=inputPassword3 class="col-sm-1 control-label">类型</label><div class=col-sm-10><label class=radio-inline><input type=radio name=type ng-model=vm.postData.type ng-checked="vm.postData.type=='0'" value=0> 发帖</label> <label class=radio-inline><input type=radio name=type ng-model=vm.postData.type ng-checked="vm.postData.type=='1'" value=1> 求助</label></div></div><div class=form-group><label for=inputEmail3 class="col-sm-1 control-label">内容</label><div class=col-sm-10><textarea class=form-control ckeditor ng-model=vm.postData.content placeholder=内容></textarea></div></div></form></div><div class=modal-footer><button type=submit class="btn btn-primary" ng-click=updatePost()>保存</button></div></div></div></div>